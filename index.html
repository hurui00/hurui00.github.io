<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>myweb</title>
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/main.css">
<script src="js/move.js"></script>
<script src="js/addMouseWheel.js"></script>
</head>
<script>
function getByClass(oParent,sClass){
	if(oParent.getElementsByCalssName){
		return oParent.getElementsByCalssName(sClass);
	} else {
		var result = [];
		var aEle = oParent.getElementsByTagName("*");
		for(var i = 0; i < aEle.length; i++){
			
			var _aTmp = aEle[i].className.split(" ");
			
			if(findInArr(_aTmp,sClass)){
				result.push(aEle[i]);
			}
		}
		return result;
	}
}

function findInArr(arr,n){
	for(var i = 0; i < arr.length; i++){
		if(arr[i] == n){
			return true;
		}
	}
	return false;
}

function getPos(obj){
	var l=0;
	var t=0;
	    
	while(obj){
		l+=obj.offsetLeft;	
		t+=obj.offsetTop;
		obj=obj.offsetParent;	
	}
	return {left:l,top:t}
}
window.onload=function(){
	//滚动固定
	window.onscroll=function(){
		var oHead=document.getElementById('header');
		var oHeadHdie=document.getElementById('header_hide');
		var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		if(scrollTop>oHead.offsetHeight){
			oHead.style.zIndex=10000;
			oHead.style.position="fixed";
			oHead.style.top = "0";
			oHeadHdie.style.display="block"
		}else{
			oHead.style.position="";
			oHeadHdie.style.display="none"
		}
	}
//nav
	//alert(oHome)
//大小导航一样的代码   可以封装
	var oUl = document.getElementById("nav");
	var oHome =document.getElementById("home");
	var oWrapBox = document.getElementById("box");
	var clientH=document.documentElement.clientHeight;
	var aLi1 = oUl.children;
	var len = aLi1.length;
	var oBox = aLi1[len - 1];
	var timer1=null;
function moveScroll(iTarget,time){
		var start=document.documentElement.scrollTop||document.body.scrollTop;  //不带px  所以运动框架自己再封装
		var dis=iTarget-start;
		var n=0;
		var count=parseFloat(time/30);
		clearInterval(timer1);
		timer1=setInterval(function(){
			n++;
			var cur=start+dis*n/count;
			document.documentElement.scrollTop=cur;
			document.body.scrollTop=cur;
			//userGun=false;
			if(n==count){
				clearInterval(timer1);
			}	
		},30)
};
	
	for(var i=0;i<aLi1.length;i++){
		aLi1[i].index=i;
		aLi1[i].addEventListener("click",function(){
				cur=this.index;
				moveScroll(cur*clientH,600)
		},false);
	}
	
	//给每个div 加可视区高度
	(function(){
		var oDiv = document.getElementById("box");
		var clientHeight = document.documentElement.clientHeight
		var aEle = getByClass(oDiv,"common")
		for(var i = 0; i < aEle.length; i++){
			aEle[i].style.height =clientHeight+"px";
		}
	})()
	//添加事件
	for(var i = 0; i < len - 1; i++){
		aLi1[i].onmouseover = function(){
			move(oBox,this.offsetLeft);
			for(var i = 0; i < len - 1; i++){
				aLi1[i].style.color="#fff";
			}
			this.style.color="#06F";
		};
	}
	var speed = 0;
	var left  = 0;
	function move(obj,iTarget){
		clearInterval(obj.timer);
		obj.timer = setInterval(function(){
			speed += (iTarget - left)/5;
			speed *= 0.7;
			left += speed;
			obj.style.left = Math.round(left) + "px"; 
			
			//if(obj.offsetLeft == iTarget){
			if(obj.offsetLeft == iTarget && Math.abs(speed) < 1){
				clearInterval(obj.timer);
			}
		},30);
	}
	oHome.onclick=function(){
	};
	//自动bof选项卡
	var oTab = document.getElementById("tab");
	var oDiv = document.getElementById("radius");
	var aBtn = oDiv.getElementsByTagName("a");
	var aLi = oTab.getElementsByTagName("li");
	var oPrev = document.getElementById("lf");
	var oNext = document.getElementById("rt");
	var iNow = 0;
	//自动播放
	//alert(aLi.length)
	var timer = setInterval(next,4000);
	oTab.onmouseover = function(){
		clearInterval(timer);
		oPrev.style.display="block"	
		oNext.style.display="block"	
	};
	oTab.onmouseout = function(){
		timer = setInterval(next,4000);	
		oPrev.style.display="none"	
		oNext.style.display="none"	
	};
	//上一个
	oPrev.onclick = function(){
		iNow--;
		if(iNow == -1){
			iNow = aBtn.length - 1;
		}
		tab();
	};
	//下一个
	oNext.onclick = next;

	function next(){
		iNow++;
		
		if(iNow == aBtn.length){
			iNow = 0;
		}
		tab();
	}	
	function tab(){
		for(var i = 0; i < aBtn.length; i++){
			aBtn[i].className = "";
			aLi[i].style.display = "none";
		}
		aBtn[iNow].className = "active";
		aLi[iNow].style.display = "block";	
	}
	for(var i = 0; i < aBtn.length; i++){
		aBtn[i].index = i;
		aBtn[i].onclick = function(){
			iNow = this.index;
			tab();
		};
	}
	//skills
(function(){
	var oUlSk = document.getElementById("ul1");
	var aLiSk = oUlSk.children;
	
	for(var i = 0; i < aLiSk.length; i++){
		lagou(aLiSk[i]);
	}
	
	function getDir(oEvent,obj){
		var x1 = getPos(obj).left + obj.offsetWidth/2;
		var y1 = getPos(obj).top + obj.offsetHeight/2;
		
		var x2 = oEvent.pageX;
		var y2 = oEvent.pageY;
		
		var x = x2 - x1;
		var y = y1 - y2;
		
		// 0 左边 1 下  2 右  3 上 
		return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;			
	}
	function lagou(oDiv){
		oDiv.onmouseover = function(ev){
			var oEvent = ev || event;
			var n = getDir(oEvent,this);
			var oSpan = this.children[0];
			var oFrom = oEvent.fromElement || oEvent.relatedTarget;
			if(oDiv.contains(oFrom)){
				return;
			}
			switch(n){
				case 0://左边
					oSpan.style.left = "-300px";
					oSpan.style.top = "0";
					break;
				case 1://下边
					oSpan.style.left = "0";
					oSpan.style.top = "300px";
					break;
				case 2://右边
					oSpan.style.left = "300px";
					oSpan.style.top = "0";
					break;
				case 3://上边
					oSpan.style.left = "0";
					oSpan.style.top = "-300px";
					break;
			}
			moveRuning(oSpan,{left:0,top:0});
		};
		
		oDiv.onmouseout = function(ev){
			var oEvent = ev || event;
			var n = getDir(oEvent,this);
			var oSpan = this.children[0];
			
			var oTo = oEvent.toElement || oEvent.relatedTarget;
			if(oDiv.contains(oTo)){
				return;
			}
			switch(n){
				case 0://左边 
					moveRuning(oSpan,{left:-300,top:0});
					break;
				case 1://下边 
					moveRuning(oSpan,{left:0,top:300});
					break;
				case 2://右边 
					moveRuning(oSpan,{left:300,top:0});
					break;
				case 3://上边 
					moveRuning(oSpan,{left:0,top:-300});
					break;
			} 
		};
	}
})();	
//点击隐藏再出来；
(function(){
    var oShow = document.getElementById('show');
	var oUl = document.getElementById("eft");
	var aLi = oUl.children;
	var len = aLi.length;
	var aPos = [];
	for(var i = 0; i < len; i++){
		aPos[i] = {left:aLi[i].offsetLeft,top:aLi[i].offsetTop};
		aLi[i].style.left = aPos[i].left +　"px";
		aLi[i].style.top  = aPos[i].top  +　"px";
	}
	for(var i = 0; i < len; i++){
		aLi[i].style.position  =  "absolute";
		aLi[i].style.margin  =  "0";
	}
	//收！
	var timer = null;
	var arr = ['亚麻跌','临幸我']
	oShow.onmouseover=function(){
		moveRuning(oShow,{borderRadius:50})
		oShow.style.borderRadius="0"	
		oShow.innerHTML=arr[0]
	}
	oShow.onmouseout=function(){
		moveRuning(oShow,{borderRadius:0})
		oShow.innerHTML=arr[1]
	}
	oShow.onclick = function(){
		var i = 0;
		clearInterval(timer);
		timer = setInterval(function(){
			(function(index){
				moveRuning(aLi[i],{left:0,top:0,width:0,height:0,opacity:0},{
					complete:function(){
						//alert(index);
						if(index == len - 1){
							//alert("运动完成！");
							//放出来
							var i = index;
							clearInterval(timer);
							timer = setInterval(function(){
								moveRuning(aLi[i],{left:aPos[i].left,top:aPos[i].top,width:204, height:210,opacity:1});
								i--;
								if(i == -1){
									clearInterval(timer);
								}
							},100);
						}
					}
				});
			})(i);
			i++;
			if(i == len){
				clearInterval(timer);
			}
		},100);
	};
})();
	//about
(function(){
	var oAtbMe = document.getElementById("atbMe");
	var aLiAtbMe = oAtbMe.children;
	var oAtbMe = document.getElementById("atbMe2");
	changeXY(aLiAtbMe)
	// 布局转换
function changeXY(obj){
	var len1 = aLiAtbMe.length;
	var aPos = [];
	for(var i = 0; i < len1; i++){
		aPos[i] = {left:aLiAtbMe[i].offsetLeft,top:aLiAtbMe[i].offsetTop};
		aLiAtbMe[i].style.left = aPos[i].left + "px";
		aLiAtbMe[i].style.top  = aPos[i].top + "px";
	}
	for(var i = 0; i < len1; i++){
		aLiAtbMe[i].style.position  =  "absolute";
		aLiAtbMe[i].style.margin  =  "0";	
	}
	var zIndex = 1;
	//添加事件
	for(var i = 0; i < len1; i++){
		
		aLiAtbMe[i].onmouseover = function(){
			this.style.zIndex = zIndex++;
			//alert(this)
			this.style.background="#79e1a3"
			moveRuning(this,{ opacity:1, width:140});	
		};
		aLiAtbMe[i].onmouseout = function(){
			moveRuning(this,{ opacity:.6,width:78});
			this.style.background=null
		};	
	
	}
}
})();
//介绍
(function(){
   var str="性 格 内 敛 - - - - - - - - , 做 事 专 注 认 真 , - - - - - - - - 责 任 心 强 , - - - - - - - - 追 求 极 限 技 术 , - - - - - - - - 突 破 自 我 。 。 。";
   var str1="欢 迎 来 到 我 的 网 站"
   	var oJs=document.getElementById('jieshao')
   	var oWr=document.getElementById('wr')
	
	
	for(var i=0;i<str.length;i++){
		var oSpan = document.createElement("span");
		oSpan.innerHTML=str.charAt(i);
		oJs.appendChild(oSpan);
	}
	var aSpan=oJs.getElementsByTagName("span")
	var i=0;
	 var timerWrite=setInterval(function(){
		moveRuning(aSpan[i],{opacity:1})		
		i++;
		if(i==str.length){
			clearInterval(timerWrite)
		}
		},120);
	})();
	
	(function(){
		
	var oDiv = document.getElementById("fan");
	var oPage  = oDiv.querySelector(".page");
	var oFront = oDiv.querySelector(".front");
	var oBack  = oDiv.querySelector(".back");
	var oPage2 = oDiv.querySelector(".page2");
	
	var iNow = 0;
setInterval(function(){
		iNow++;
		//点击的时候才有运动
		oPage.style.transition = "1s all ease";
		oPage.style.transform = "perspective(800px) rotateY(-180deg)";	
	},3000)
	
	oPage.addEventListener("transitionend",function(){
		oPage.style.transition = "none";
		oPage.style.transform = "perspective(800px) rotateY(0deg)";
		
		oDiv.style.backgroundImage = "url(img2/"+iNow%3+".jpg)";
		oFront.style.backgroundImage = "url(img2/"+iNow%3+".jpg)";
		oBack.style.backgroundImage = "url(img2/"+(iNow+1)%3+".jpg)";
		oPage2.style.backgroundImage = "url(img2/"+(iNow+1)%3+".jpg)";
		
	},false);
		
	})();
	
	
	
	
		//effect

}
</script>
<body>
<div class="wrapBox" id="box">
     <div class="nav clearfix" id="header">
            <div class="top_nav">
     			<h1 class="icon_l fl"></h1>
            	<ul class="ul1 clearfix fr" id="nav">
                	<li class="active_write" id="home">HOME</li>
                	<li>SKILL</li>
                	<li>ABOUT</li>
                	<li>EFFECT</li>
                	<li>CONTACT</li>
                    <li class="box"></li>
                </ul>
            </div>
     </div>
     <div class="nav clearfix" id="header_hide">
     		<h1 class="icon_l"></h1>
            <div class="fr">
            	<ul class="ul1 clearfix" id="nav">
                	<li class="active_write">HOME</li>
                	<li>SKILL</li>
                	<li>ABOUT</li>
                	<li>EFFECT</li>
                	<li>CONTACT</li>
                    <li class="box"></li>
                </ul>
            </div>
     </div>
     <div class="tab common" id="tab">
     		<a id="lf" href="javascript:;"></a>
     		<ul>
            	<li style="display:block;">
                 	<div class="web">
                        <div class="line">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="produce">- MYWEB -</p>
                        <div class="line_btm">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="mpc">我的名字叫胡瑞,我是一枚小前端希望在前端的道路上实现自我!</p>
                        <div class="btn">TELL ME MORE</div>
                    </div>
                    <p class="eng">^In the dark of the world to find that ray of sunshine</p> 
                    <img src="img/img1.png"/>
                </li>
            	<li>
                 	<div class="web">
                        <div class="line">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="produce">- MYWEB -</p>
                        <div class="line_btm">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="mpc">我的名字叫胡瑞,我是一枚小前端希望在前端的道路上实现自我!</p>
                        <div class="btn">TELL ME MORE</div>
                    </div>
                    <p class="eng">^In the dark of the world to find that ray of sunshine</p> 
                    <img src="img/bg4.jpg"/>
                
                </li>
            	<li>
                 	<div class="web">
                        <div class="line">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="produce">- MYWEB -</p>
                        <div class="line_btm">
                            <span></span>
                            <span></span>
                        </div>
                        <p class="mpc">我的名字叫胡瑞,我是一枚小前端希望在前端的道路上实现自我!</p>
                        <div class="btn">TELL ME MORE</div>
                    </div>
                    <p class="eng">^In the dark of the world to find that ray of sunshine</p> 
                    <img src="img/bg2.jpg"/>
                
                </li>
            </ul>
     		<a id="rt" href="javascript:;"></a>
            <div id="radius" class="clearfix">
             		<a href="javascript:;"></a>
             		<a href="javascript:;"></a>
             		<a href="javascript:;"></a>
            </div>
     </div>
     <div class="skill common" id="skill">
     		<div class="skill-box">
                <div class="bar_left">
                    <h3 class="bar">SKILLS</h3>
                    <span class="bar_btm"></span>
                </div>
                <ul class="list clearfix" id="ul1">
                    <li>
                        <span><p>JAVASCRIPT</p><p>熟练</p></span>
                        <h3>JAVASCRIPT</h3>
                        <p>ECMAScript DOM BOM</p>
                        <p>熟练使用原生js实现交互</p>
                    </li>
                    <li>
                        <span><p>HTML-HTML5</p><p>熟练</p></span>
                        <h3>HTML5</h3>
                        <p>HTML-HTML5</p>
                        <p>熟悉W3C标准，WEB语义化</p>
                    </li>
                    <li>
                        <span><p>CSS-CSS3</p>
                        <p>熟练</p></span>
                        <h3>CSS3</h3>
                        <p>CSS-CSS3</p>
                        <p>兼容多种浏览器</p>
                    </li>
                    <li>
                        <span><p>Ajax</p>
                        <p>熟练</p></span>
                        <h3>AJAX</h3>
                        <p>Ajax</p>
                        <p>熟练使用Ajax技术及其原理</p>
                    </li>
                    <li>
                        <span><p>模块化</p>
                        <p>熟悉</p></span>
                        <h3>SEAJS</h3>
                        <p>模块化</p>
                        <p>前端开发工程化</p>
                    </li>
                    <li>
                        <span><p>良好的审美</p>
                        <p>熟练ps</p></span>
                        <h3>DESIGN</h3>
                        <p>良好的审美</p>
                        <p>美工出身，熟练ps,切图</p>
                    </li>
                    <li>
                        <span><p>Jquery</p>
                        <p>熟练</p></span>
                        <h3>JQUERY</h3>
                        <p>Jquery</p>
                        <p>熟练使用Jquery类库</p>
                    </li>
                    <li>
                        <span><p>node.js</p><p>了解</p></span>
                        <h3>MORE</h3>
                        <p>G i t</p>
                        <p>P h p</p>
                    </li>
                </ul>
            </div>
     </div>
     <div class="about common">
     		<div class="about_box clearfix">
                <div class="bar_left">
                    <h3 class="bar" id="abt">ABOUT</h3>
                    <span class="bar_btm"></span>
                </div>
                <div class="fl clearfix xinxi">
                        <div class="portrait fl"></div>
                        <div class="jx1 clearfix" id="atbMe">
                            <span class="s1">耐心</span>
                            <span class="s1">细节</span>
                            <span class="s1">天蝎</span>
                        </div>
                        <div class="jx2 clearfix">
                            <span class="s1">单身</span>
                            <span class="s1">90后</span>
                            <span class="s1">江苏</span>
                        </div>
                </div>
                <div class="jieshao fr" id="jieshao">
                </div>
                <div id="fan">
                    <div class="page">
                        <div class="front"></div>
                        <div class="back"></div>
                    </div>
                    <div class="page2"></div>
                </div>
                
            </div>
     </div>
     <div class="effect common">
     		<div class="effect-box">
                <div class="bar_left">
                    <h3 class="bar">EFFECT</h3>
                    <span class="bar_btm"></span>
                </div>
                <ul class="list clearfix" id="eft">
                    <li class="eft" id="mf">
                        <a href="html/ricel.html" target="_blank">
                            <h3>小球运动</h3>
                            <span>小球运动</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/clock.html" target="_blank">
                            <h3>时钟</h3>
                            <span>时钟</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/basketball.html" target="_blank">
                            <h3>篮球</h3>
                            <span>篮球</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/wuhuan.html" target="_blank">
                            <h3>五环照片</h3>
                            <span>五环照片</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/changePos.html" target="_blank">
                            <h3>换位置</h3>
                            <span>换位置</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/accordion.html" target="_blank">
                            <h3>手风琴</h3>
                            <span>手风琴</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/pingbao.html" target="_blank">
                            <h3>屏保</h3>
                            <span>屏保</span>
                        </a>
                    </li>
                    <li class="eft">
                        <a href="html/baozha.html" target="_blank">
                            <h3>爆炸图片</h3>
                            <span>爆炸图片</span>
                        </a>
                    </li>
                </ul>
                <div class="show" id="show">
                     快点我
                </div>
            </div>
     </div>
     <div class="contact common">
     		<div class="contact_box">
                <div class="bar_left">
                    <h3 class="bar">CONTACT</h3>
                    <span class="bar_btm"></span>
                </div>
                <div class="em clearfix">
                     <img class="fl" src="img/wx.jpg"/>
                     <div class="fl myself">
                            <h4 id="h4">TEL:&nbsp;13816560640</h4>
                            <p class="qq">QQ:&nbsp;865279520</p>
                            <p>EMIAL:&nbsp;huruiaiwl@163.com</p>
                     </div>
                </div>
            </div>
     </div>
</div>
</body>
</html>
